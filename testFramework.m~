clear
clc

cd /home/kaixu/myGitHub/BPFCS
start_spams
cd framework

% 
% poolobj = gcp('nocreate'); % If no pool, do not create new one.
% if isempty(poolobj)
%     poolsize = 0;
%     parpool('local',24);
% else
%     poolsize = poolobj.NumWorkers;
% end

%%

baseDir = '/home/kaixu/myGitHub/BPFCS/';


fileName = {'sweep_Lambda_PreDCT.m', 'sweep_Lambda_PreDWT.m', ...
            'demoSweepDctPre.m', 'demoSweepDwtPre.m', ...
            'demoSweepFilterDCT.m'};      
        
runDir = fullfile(baseDir, 'runtimeFolder');
if ~isequal(exist(runDir,'dir'),7)
    mkdir(runDir);
end

for i = 1 : length(srcFileName)
    dstFile = fullfile(runDir,dFileName{i});
    srcFile = fullfile(srcFileName{i});
    copyfile(srcFile, dstFile);
    run(dstFile);
end

%%

% sweep_Lambda_samples_withoutPre;
% sweep_K_samples_withoutPre;


% demoSweepFilter;
% demoSweepWithoutPre;
% 
% demoSweepDctPre;
% demoSweepDwtPre;

delete(poolobj)
